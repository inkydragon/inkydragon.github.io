<!DOCTYPE html>
<html lang="zh-cn">
  <head><meta name="generator" content="Hexo 3.8.0">
    
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">



  <meta name="description" content="可爱的小姐姐~ Ruby!">




  <meta name="keywords" content="Ruby,">




  <link rel="alternate" href="/atom.xml" title="0u0' lab | Hexo">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.4.x">



<link rel="canonical" href="https://blog.wo-class.cn/可爱的小姐姐-Ruby/">


<meta name="description" content="Seven Languages in Seven Weeks: Ruby, Day 1-3 FULL">
<meta name="keywords" content="Ruby">
<meta property="og:type" content="article">
<meta property="og:title" content="可爱的小姐姐~ Ruby!">
<meta property="og:url" content="https://blog.wo-class.cn/可爱的小姐姐-Ruby/index.html">
<meta property="og:site_name" content="0u0&#39; lab | Hexo">
<meta property="og:description" content="Seven Languages in Seven Weeks: Ruby, Day 1-3 FULL">
<meta property="og:locale" content="zh-cn">
<meta property="og:image" content="https://blog.wo-class.cn/可爱的小姐姐-Ruby/ruby.jpg">
<meta property="og:image" content="https://blog.wo-class.cn/可爱的小姐姐-Ruby/color.png">
<meta property="og:updated_time" content="2018-12-21T11:52:17.597Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="可爱的小姐姐~ Ruby!">
<meta name="twitter:description" content="Seven Languages in Seven Weeks: Ruby, Day 1-3 FULL">
<meta name="twitter:image" content="https://blog.wo-class.cn/可爱的小姐姐-Ruby/ruby.jpg">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.4.x">



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css">





<script>
  var CONFIG = {
    search: true,
    searchPath: "/search.xml",
    fancybox: true,
    toc: true,
  }
</script>




  



    <title> 可爱的小姐姐~ Ruby! · 0u0' lab | Hexo </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">0u0' lab | Hexo</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            Home
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            Archives
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            Tags
          
        </li>
      </a>
    
      <a href="/categories">
        <li class="mobile-menu-item">
          
          
            Categories
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">0u0' lab | Hexo</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              首页
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              归档
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              标签
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/categories">
            
            
              分类
            
          </a>
        </li>
      
      
        <li class="menu-search">
          <form>
            <i class="iconfont icon-search" id="open-search"></i>
            <input type="text" class="search-input" id="search-input">
            <i class="iconfont icon-close" id="close-search"></i>
          </form>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          可爱的小姐姐~ Ruby!
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2017年4月22日
        </span>
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Install"><span class="toc-text">Install</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#———-Day-1-———"><span class="toc-text">——— Day 1 ———</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Ruby’properties"><span class="toc-text">Ruby’properties</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Notes："><span class="toc-text">Notes：</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Ruby初体验"><span class="toc-text">Ruby初体验</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ruby-的编程模型"><span class="toc-text">Ruby 的编程模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#判断"><span class="toc-text">判断</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#鸭子类型"><span class="toc-text">鸭子类型</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#summary"><span class="toc-text">summary</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Todo"><span class="toc-text">Todo</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-“Hello-world-”"><span class="toc-text">1. “Hello, world.”</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-找下标"><span class="toc-text">2. 找下标</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#index-方法"><span class="toc-text">index 方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#方法"><span class="toc-text">=~ 方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-重复打印"><span class="toc-text">3. 重复打印</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#each-方法"><span class="toc-text">each 方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更优雅的-方法"><span class="toc-text">更优雅的 *方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-循环"><span class="toc-text">4. 循环</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-amp-6-猜数字-rb"><span class="toc-text">5.&amp;6. 猜数字.rb</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#———-Day-2-———"><span class="toc-text">——— Day 2 ———</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Note"><span class="toc-text">Note</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#函数"><span class="toc-text">函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数组"><span class="toc-text">数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#散列表"><span class="toc-text">散列表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#代码块和yield"><span class="toc-text">代码块和yield</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#类"><span class="toc-text">类</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#summary-1"><span class="toc-text">summary</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Todo-1"><span class="toc-text">Todo</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-each与枚举"><span class="toc-text">1. each与枚举</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-树与方法"><span class="toc-text">2. 树与方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-grep"><span class="toc-text">3. grep</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#———-Day-3-———"><span class="toc-text">——— Day 3 ———</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Note-1"><span class="toc-text">Note</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#元编程"><span class="toc-text">元编程</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#summary-2"><span class="toc-text">summary</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Todo-2"><span class="toc-text">Todo</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#CSV程序"><span class="toc-text">CSV程序</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#–-More-about-Ruby-–"><span class="toc-text">– More about Ruby –</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Ruby-的核心优势"><span class="toc-text">Ruby 的核心优势</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#不足之处"><span class="toc-text">不足之处</span></a></li></ol>
    </div>
  </div>


    <div class="post-content">
      
        <p>Seven Languages in Seven Weeks: Ruby, Day 1-3 FULL</p>
<img src="/可爱的小姐姐-Ruby/ruby.jpg" title="Just For Fun ! —— Ruby">
<a id="more"></a>
<blockquote>
<p>有糖相伴好下药。 ——Mary Poppins</p>
</blockquote>
<h1 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h1><p><a href="https://www.ruby-lang.org/zh_cn/downloads/" target="_blank" rel="noopener">下载 Ruby</a></p>
<p>每个流行的平台都有多种工具可用于安装 Ruby：</p>
<ul>
<li>Linux/UNIX 平台，可以使用第三方工具（如 rbenv 或 RVM）或使用系统中的包管理系统。</li>
<li>OS X 平台，可以使用第三方工具（如 rbenv 或 RVM）。</li>
<li>Windows 平台，可以使用 <a href="https://rubyinstaller.org/downloads/" target="_blank" rel="noopener">RubyInstaller</a>。</li>
</ul>
<h1 id="———-Day-1-———"><a href="#———-Day-1-———" class="headerlink" title="——— Day 1 ———"></a>——— Day 1 ———</h1><h1 id="Ruby’properties"><a href="#Ruby’properties" class="headerlink" title="Ruby’properties"></a>Ruby’properties</h1><ul>
<li>Ruby is object oriented</li>
<li>Ruby is duck typed</li>
<li>Ruby is productive</li>
</ul>
<h1 id="Notes："><a href="#Notes：" class="headerlink" title="Notes："></a>Notes：</h1><h2 id="Ruby初体验"><a href="#Ruby初体验" class="headerlink" title="Ruby初体验"></a>Ruby初体验</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">irb(main):001:0&gt;</span> puts <span class="string">'hello, world'</span></span><br><span class="line">hello, world</span><br><span class="line">=&gt; nil</span><br><span class="line"><span class="meta">irb(main):002:0&gt;</span> languages = <span class="string">'Ruby'</span></span><br><span class="line">=&gt; <span class="string">"Ruby"</span></span><br><span class="line"><span class="meta">irb(main):003:0&gt;</span> puts <span class="string">"hello, <span class="subst">#&#123;languages&#125;</span>"</span></span><br><span class="line">hello, Ruby</span><br><span class="line">=&gt; nil</span><br><span class="line"><span class="meta">irb(main):004:0&gt;</span> languages = <span class="string">'my Ruby'</span></span><br><span class="line">=&gt; <span class="string">"my Ruby"</span></span><br><span class="line"><span class="meta">irb(main):005:0&gt;</span> puts <span class="string">"hello, <span class="subst">#&#123;languages&#125;</span>"</span></span><br><span class="line">hello, my Ruby</span><br><span class="line">=&gt; nil</span><br></pre></td></tr></table></figure>
<p>Note:</p>
<ul>
<li>Ruby 是解释执行的</li>
<li>Ruby 不需要预先声明变量</li>
<li>每条 Ruby 语句都有返回值</li>
</ul>
<h2 id="Ruby-的编程模型"><a href="#Ruby-的编程模型" class="headerlink" title="Ruby 的编程模型"></a>Ruby 的编程模型</h2><p>Point: Ruby 是一门纯面向对象的语言。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">irb(main):006:0&gt;</span> <span class="number">4</span></span><br><span class="line">=&gt; <span class="number">4</span></span><br><span class="line"><span class="meta">irb(main):007:0&gt;</span> <span class="number">4</span>.class</span><br><span class="line">=&gt; Integer</span><br><span class="line"><span class="meta">irb(main):008:0&gt;</span> <span class="number">4</span>+<span class="number">8</span></span><br><span class="line">=&gt; <span class="number">12</span></span><br><span class="line"><span class="meta">irb(main):009:0&gt;</span> <span class="number">4</span>.methods</span><br><span class="line">=&gt; [<span class="symbol">:%</span>, <span class="symbol">:&amp;</span>, <span class="symbol">:*</span>, <span class="symbol">:+</span>, <span class="symbol">:-</span>, <span class="symbol">:/</span>, <span class="symbol">:&lt;</span>, <span class="symbol">:&gt;</span>, <span class="symbol">:^</span>, <span class="symbol">:|</span>, <span class="symbol">:~</span>, <span class="symbol">:-@</span>, <span class="symbol">:**</span>, <span class="symbol">:&lt;=&gt;</span>, <span class="symbol">:&lt;&lt;</span>, <span class="symbol">:&gt;&gt;</span>, <span class="symbol">:&lt;=</span>, <span class="symbol">:&gt;=</span>, <span class="symbol">:==</span>, <span class="symbol">:===</span>, <span class="symbol">:[]</span>, <span class="symbol">:inspect</span>, <span class="symbol">:size</span>, <span class="symbol">:succ</span>, <span class="symbol">:to_int</span>, <span class="symbol">:to_s</span>, <span class="symbol">:to_i</span>, <span class="symbol">:to_f</span>, <span class="symbol">:next</span>, <span class="symbol">:div</span>, <span class="symbol">:upto</span>, <span class="symbol">:chr</span>,</span><br><span class="line"><span class="symbol">:ord</span>, <span class="symbol">:coerce</span>, <span class="symbol">:divmod</span>, <span class="symbol">:fdiv</span>, <span class="symbol">:modulo</span>, <span class="symbol">:remainder</span>, <span class="symbol">:abs</span>, <span class="symbol">:magnitude</span>, <span class="symbol">:integer?</span>, <span class="symbol">:floor</span>, <span class="symbol">:ceil</span>, <span class="symbol">:round</span>, <span class="symbol">:truncate</span>, <span class="symbol">:odd?</span>, <span class="symbol">:even?</span>, <span class="symbol">:downto</span>, <span class="symbol">:times</span>, <span class="symbol">:pred</span>, <span class="symbol">:bit_length</span>, <span class="symbol">:digits</span>, <span class="symbol">:to_r</span>, <span class="symbol">:numerator</span>, <span class="symbol">:denominator</span>, <span class="symbol">:rationalize</span>, <span class="symbol">:gcd</span>, <span class="symbol">:lcm</span>, <span class="symbol">:gcdlcm</span>, <span class="symbol">:+@</span>, <span class="symbol">:eql?</span>, <span class="symbol">:singleton_method_added</span>, <span class="symbol">:i</span>, <span class="symbol">:real?</span>, <span class="symbol">:zero?</span>, <span class="symbol">:nonzero?</span>, <span class="symbol">:finite?</span>, <span class="symbol">:infinite?</span>, <span class="symbol">:step</span>, <span class="symbol">:positive?</span>, <span class="symbol">:negative?</span>, <span class="symbol">:quo</span>, <span class="symbol">:arg</span>, <span class="symbol">:rectangular</span>, <span class="symbol">:rect</span>, <span class="symbol">:polar</span>, <span class="symbol">:real</span>, <span class="symbol">:imaginary</span>, <span class="symbol">:imag</span>, <span class="symbol">:abs2</span>, <span class="symbol">:angle</span>, <span class="symbol">:phase</span>, <span class="symbol">:conjugate</span>, <span class="symbol">:conj</span>, <span class="symbol">:to_c</span>, <span class="symbol">:between?</span>, <span class="symbol">:clamp</span>, <span class="symbol">:instance_of?</span>, <span class="symbol">:kind_of?</span>, <span class="symbol">:is_a?</span>, <span class="symbol">:tap</span>,</span><br><span class="line"><span class="symbol">:public_send</span>, <span class="symbol">:define_singleton_method</span>, <span class="symbol">:method</span>, <span class="symbol">:public_method</span>, <span class="symbol">:remove_instance_variable</span>, <span class="symbol">:instance_variable_set</span>, <span class="symbol">:singleton_method</span>, <span class="symbol">:extend</span>, <span class="symbol">:to_enum</span>, <span class="symbol">:enum_for</span>, <span class="symbol">:=~</span>, <span class="symbol">:</span>!~, <span class="symbol">:respond_to?</span>, <span class="symbol">:freeze</span>, <span class="symbol">:object_id</span>, <span class="symbol">:send</span>, <span class="symbol">:display</span>, <span class="symbol">:nil?</span>, <span class="symbol">:hash</span>, <span class="symbol">:class</span>, <span class="symbol">:singleton_class</span>, <span class="symbol">:clone</span>, <span class="symbol">:dup</span>, <span class="symbol">:itself</span>, <span class="symbol">:taint</span>, <span class="symbol">:tainted?</span>, <span class="symbol">:untaint</span>, <span class="symbol">:untrust</span>, <span class="symbol">:untrusted?</span>, <span class="symbol">:trust</span>, <span class="symbol">:frozen?</span>,</span><br><span class="line"><span class="symbol">:methods</span>, <span class="symbol">:singleton_methods</span>, <span class="symbol">:protected_methods</span>, <span class="symbol">:private_methods</span>, <span class="symbol">:public_methods</span>, <span class="symbol">:instance_variable_get</span>, <span class="symbol">:instance_variables</span>, <span class="symbol">:instance_variable_defined?</span>, <span class="symbol">:</span>!, <span class="symbol">:</span>!=, <span class="symbol">:__send__</span>, <span class="symbol">:equal?</span>, <span class="symbol">:instance_eval</span>, <span class="symbol">:instance_exec</span>, <span class="symbol">:__id__</span>]</span><br></pre></td></tr></table></figure>
<p>Note:</p>
<ul>
<li>Ruby 中一切皆对象</li>
<li><code>.methods</code> 可返回方法数组</li>
<li>可用<code>.</code>调用对象具有的任意方法</li>
</ul>
<h2 id="判断"><a href="#判断" class="headerlink" title="判断"></a>判断</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">irb(main):012:0&gt;</span> x = <span class="number">4</span></span><br><span class="line">=&gt; <span class="number">4</span></span><br><span class="line"><span class="meta">irb(main):013:0&gt;</span> x &lt; <span class="number">5</span></span><br><span class="line">=&gt; true</span><br><span class="line"><span class="meta">irb(main):014:0&gt;</span> x &gt; <span class="number">4</span></span><br><span class="line">=&gt; false</span><br><span class="line"><span class="meta">irb(main):015:0&gt;</span> false.class</span><br><span class="line">=&gt; FalseClass</span><br><span class="line"><span class="meta">irb(main):016:0&gt;</span> true.class</span><br><span class="line">=&gt; TrueClass</span><br></pre></td></tr></table></figure>
<p>Note: </p>
<ul>
<li>Ruby 中的 <code>true</code>和<code>false</code>都是一等对象(first-class object)</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">irb(main):001:0&gt;</span> x = <span class="number">4</span></span><br><span class="line">=&gt; <span class="number">4</span></span><br><span class="line"><span class="meta">irb(main):002:0&gt;</span> puts <span class="string">'This appears to be false.'</span> <span class="keyword">unless</span> x == <span class="number">4</span></span><br><span class="line">=&gt; nil</span><br><span class="line"><span class="meta">irb(main):003:0&gt;</span> puts <span class="string">'This appears to be true.'</span> if x == <span class="number">4</span></span><br><span class="line">This appears to be <span class="literal">true</span>.</span><br><span class="line">=&gt; nil</span><br><span class="line"><span class="meta">irb(main):004:0&gt;</span> if x == <span class="number">4</span></span><br><span class="line"><span class="meta">irb(main):005:1&gt;</span>   puts <span class="string">'This appears to be true.'</span></span><br><span class="line"><span class="meta">irb(main):006:1&gt;</span>   end</span><br><span class="line">This appears to be <span class="literal">true</span>.</span><br><span class="line">=&gt; nil</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="meta">irb(main):014:0&gt;</span> <span class="keyword">unless</span> x == <span class="number">4</span></span><br><span class="line"><span class="meta">irb(main):015:1&gt;</span>   puts <span class="string">'This appears to be false.'</span></span><br><span class="line"><span class="meta">irb(main):016:1&gt;</span>   else</span><br><span class="line">irb(main)<span class="symbol">:</span><span class="number">017</span><span class="symbol">:</span><span class="number">1</span>*     puts <span class="string">'This appears to be true.'</span></span><br><span class="line"><span class="meta">irb(main):018:1&gt;</span>   end</span><br><span class="line">This appears to be <span class="literal">true</span>.</span><br><span class="line">=&gt; nil</span><br><span class="line"><span class="meta">irb(main):019:0&gt;</span> puts <span class="string">'This appears to be true.'</span></span><br><span class="line">This appears to be <span class="literal">true</span>.</span><br><span class="line">=&gt; nil</span><br><span class="line"><span class="meta">irb(main):021:0&gt;</span> puts <span class="string">'This appears to be true.'</span> if not true</span><br><span class="line">=&gt; nil</span><br><span class="line"><span class="meta">irb(main):022:0&gt;</span> puts <span class="string">'This appears to be true.'</span> if !true</span><br><span class="line">=&gt; nil</span><br></pre></td></tr></table></figure>
<p>Note:</p>
<p>使用<code>if</code>或<code>unless</code>时，既可以用块形式</p>
<ul>
<li><code>if condition, statements, end</code><br>也可用单行形式</li>
<li><code>statements if condition</code></li>
<li><code>order.calculate_tax unless order.nil?</code></li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">irb(main):026:0&gt;</span> x = x+<span class="number">1</span> while x &lt; <span class="number">10</span></span><br><span class="line">=&gt; nil</span><br><span class="line"><span class="meta">irb(main):027:0&gt;</span> x</span><br><span class="line">=&gt; <span class="number">10</span></span><br><span class="line"><span class="meta">irb(main):028:0&gt;</span> x = x-<span class="number">1</span> until x == <span class="number">1</span></span><br><span class="line">=&gt; nil</span><br><span class="line"><span class="meta">irb(main):029:0&gt;</span> x</span><br><span class="line">=&gt; <span class="number">1</span></span><br><span class="line"><span class="meta">irb(main):030:0&gt;</span> while x &lt; <span class="number">10</span></span><br><span class="line"><span class="meta">irb(main):031:1&gt;</span>   x = x+<span class="number">1</span></span><br><span class="line"><span class="meta">irb(main):032:1&gt;</span>   puts x</span><br><span class="line"><span class="meta">irb(main):033:1&gt;</span>   end</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">7</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="number">10</span></span><br><span class="line">=&gt; nil</span><br></pre></td></tr></table></figure>
<p>判断语句<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">irb(main):034:0&gt;</span> puts <span class="string">'Should be true'</span> if <span class="number">1</span></span><br><span class="line">Should be <span class="literal">true</span></span><br><span class="line">=&gt; nil</span><br><span class="line"><span class="meta">irb(main):035:0&gt;</span> puts <span class="string">'Should be true'</span> if <span class="string">'random_string'</span></span><br><span class="line">(irb)<span class="symbol">:</span><span class="number">35</span>: <span class="symbol">warning:</span> string literal <span class="keyword">in</span> condition</span><br><span class="line">Should be <span class="literal">true</span></span><br><span class="line">=&gt; nil</span><br><span class="line"><span class="meta">irb(main):036:0&gt;</span> puts <span class="string">'Should be true'</span> if <span class="number">0</span></span><br><span class="line">Should be <span class="literal">true</span></span><br><span class="line">=&gt; nil</span><br><span class="line"><span class="meta">irb(main):037:0&gt;</span> puts <span class="string">'Should be true'</span> if true</span><br><span class="line">Should be <span class="literal">true</span></span><br><span class="line">=&gt; nil</span><br><span class="line"><span class="meta">irb(main):038:0&gt;</span> puts <span class="string">'Should be true'</span> if false</span><br><span class="line">=&gt; nil</span><br><span class="line"><span class="meta">irb(main):039:0&gt;</span> puts <span class="string">'Should be true'</span> if nil</span><br><span class="line">=&gt; nil</span><br><span class="line"><span class="meta">irb(main):040:0&gt;</span> puts <span class="string">'Should be true'</span> if <span class="string">''</span></span><br><span class="line">(irb)<span class="symbol">:</span><span class="number">40</span>: <span class="symbol">warning:</span> string literal <span class="keyword">in</span> condition</span><br><span class="line">Should be <span class="literal">true</span></span><br><span class="line">=&gt; nil</span><br><span class="line"><span class="meta">irb(main):041:0&gt;</span> puts <span class="string">'Should be true'</span> if <span class="string">""</span></span><br><span class="line">(irb)<span class="symbol">:</span><span class="number">41</span>: <span class="symbol">warning:</span> string literal <span class="keyword">in</span> condition</span><br><span class="line">Should be <span class="literal">true</span></span><br><span class="line">=&gt; nil</span><br></pre></td></tr></table></figure></p>
<p>Note:</p>
<ul>
<li>除了<code>nil</code>和<code>false</code>之外，其他值都代表<code>true</code>。C和C++程序员可得小心了，<strong>0也是true！</strong></li>
</ul>
<p><strong>短路求值</strong><br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">irb(main):043:0&gt;</span> true and false</span><br><span class="line">=&gt; false</span><br><span class="line"><span class="meta">irb(main):044:0&gt;</span> true or false</span><br><span class="line">=&gt; true</span><br><span class="line"><span class="meta">irb(main):047:0&gt;</span> false <span class="params">||</span> true</span><br><span class="line">=&gt; true</span><br><span class="line"></span><br><span class="line"><span class="meta">irb(main):053:0&gt;</span> true &amp;&amp; This_will_cause_an_error</span><br><span class="line"><span class="symbol">NameError:</span> uninitialized constant This_will_cause_an_error</span><br><span class="line">        from (irb)<span class="symbol">:</span><span class="number">53</span></span><br><span class="line">        from <span class="symbol">F:</span>/env/Ruby24-x64/bin/irb.<span class="symbol">cmd:</span><span class="number">19</span><span class="symbol">:in</span> <span class="string">`&lt;main&gt;'</span></span><br><span class="line"><span class="string">irb(main):054:0&gt; false &amp;&amp; This_will_cause_an_error</span></span><br><span class="line"><span class="string">=&gt; false</span></span><br><span class="line"><span class="string">irb(main):056:0&gt; true || This_will_cause_an_error</span></span><br><span class="line"><span class="string">=&gt; true</span></span><br><span class="line"><span class="string">irb(main):057:0&gt; true | This_will_cause_an_error</span></span><br><span class="line"><span class="string">NameError: uninitialized constant This_will_cause_an_error</span></span><br><span class="line"><span class="string">        from (irb):57</span></span><br><span class="line"><span class="string">        from F:/env/Ruby24-x64/bin/irb.cmd:19:in `</span>&lt;main&gt;<span class="string">'</span></span><br><span class="line"><span class="string">irb(main):058:0&gt; true | false</span></span><br><span class="line"><span class="string">=&gt; true</span></span><br></pre></td></tr></table></figure></p>
<p>Note:</p>
<ul>
<li><code>and &amp;&amp; or ||</code> [短路求值]<ul>
<li>整个表达式全部求值 <code>&amp; |</code></li>
</ul>
</li>
</ul>
<h2 id="鸭子类型"><a href="#鸭子类型" class="headerlink" title="鸭子类型"></a>鸭子类型</h2><p>类型安全(type safety)<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<h1 id="summary"><a href="#summary" class="headerlink" title="summary"></a>summary</h1><ul>
<li>Ruby是一门解释型语言。一切皆为对象，且易于获取对象的任何信息，如对象的各方法及所属类。</li>
<li>它是鸭子类型的，且行为通常和强类型语言毫无二致，尽管一些学者会争论其中差别。</li>
<li>它也是崇尚自由精神的语言，允许你做几乎一切事情，包括修改NilClass或String这样的核心类。</li>
</ul>
<h1 id="Todo"><a href="#Todo" class="headerlink" title="Todo"></a>Todo</h1><p><strong>Find</strong>：</p>
<ul>
<li>Ruby API文档。<br>  |- <a href="http://ruby-doc.org/" target="_blank" rel="noopener">Help and documentation for the Ruby programming language.</a><br>  |- <a href="https://www.ruby-lang.org/zh_cn/documentation/" target="_blank" rel="noopener">documentation</a></li>
<li>Programming Ruby ：The Pragmatic Programmer’s Guide<br>  |- <a href="http://ruby-doc.com/docs/ProgrammingRuby/" target="_blank" rel="noopener">Programming Ruby</a></li>
<li>替换字符串某一部分的方法。<br>  |- <a href="https://ruby-doc.org/core-1.9.3/String.html#method-i-sub" target="_blank" rel="noopener">String-sub</a></li>
<li>有关Ruby正则表达式的资料。<br>  |- <a href="https://ruby-doc.org/core-1.9.3/Regexp.html" target="_blank" rel="noopener">Regexp</a></li>
<li>有关Ruby区间（range）的资料。<br>  |- <a href="https://ruby-doc.org/core-1.9.3/Range.html" target="_blank" rel="noopener">Range</a></li>
</ul>
<p><strong>Do</strong>:</p>
<ol>
<li>打印字符串”Hello, world.”。  </li>
<li>在字符串”Hello, Ruby.”中，找出”Ruby.”所在下标。</li>
<li>打印你的名字十遍。</li>
<li>打印字符串”This is sentence number 1.”，其中的数字1会一直变化到10。</li>
<li>从文件运行Ruby程序。</li>
<li>加分题：如果你感觉意犹未尽，还可以写一个选随机数的程序。该程序让玩家猜随机数是多少，并告诉玩家是猜大了还是猜小了。<br>（提示：rand(10)可产生0～9的随机数，gets可读取键盘输入的字符串，你要把输入字符串转换成整数。）</li>
</ol>
<h2 id="1-“Hello-world-”"><a href="#1-“Hello-world-”" class="headerlink" title="1. “Hello, world.”"></a>1. “Hello, world.”</h2><figure class="highlight ruby"><figcaption><span>Hello, world.</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">irb(main):001:0&gt;</span> puts(<span class="string">"Hello,  world."</span>)</span><br><span class="line">Hello,  world.</span><br><span class="line">=&gt; nil</span><br></pre></td></tr></table></figure>
<p>直接输入字符串，看上去 <code>Ruby</code> 输出了字符串，其实那是返回值。<br><del>你大概写了一个假的 <code>Hello, world</code></del><br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">irb(main):002:0&gt;</span> <span class="string">"Hello World"</span></span><br><span class="line">=&gt; <span class="string">"Hello World"</span></span><br></pre></td></tr></table></figure></p>
<h2 id="2-找下标"><a href="#2-找下标" class="headerlink" title="2. 找下标"></a>2. 找下标</h2><h3 id="index-方法"><a href="#index-方法" class="headerlink" title="index 方法"></a><code>index</code> 方法</h3><blockquote>
<p>index(substring [, offset]) → fixnum or nil<br> index(regexp [, offset]) → fixnum or nil</p>
</blockquote>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">irb(main):048:0&gt;</span> str = <span class="string">"Hello, Ruby."</span></span><br><span class="line">=&gt; <span class="string">"Hello, Ruby."</span></span><br><span class="line"><span class="meta">irb(main):049:0&gt;</span> str.index(<span class="string">"Ruby."</span>)</span><br><span class="line">=&gt; <span class="number">7</span></span><br></pre></td></tr></table></figure>
<h3 id="方法"><a href="#方法" class="headerlink" title="=~ 方法"></a><code>=~</code> 方法</h3><p>正则表达式匹配：</p>
<blockquote>
<p>str =~ obj → fixnum or nil</p>
</blockquote>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">irb(main):052:0&gt;</span> str =~ <span class="regexp">/[Ruby.]/</span></span><br><span class="line">=&gt; <span class="number">7</span></span><br></pre></td></tr></table></figure>
<h2 id="3-重复打印"><a href="#3-重复打印" class="headerlink" title="3. 重复打印"></a>3. 重复打印</h2><h3 id="each-方法"><a href="#each-方法" class="headerlink" title="each 方法"></a><code>each</code> 方法</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">irb(main):003:0&gt;</span> <span class="function"><span class="keyword">def</span> <span class="title">h</span></span></span><br><span class="line"><span class="meta">irb(main):004:1&gt;</span> puts <span class="string">"Hello, wo!"</span></span><br><span class="line"><span class="meta">irb(main):005:1&gt;</span> end</span><br><span class="line">=&gt; <span class="symbol">:h</span></span><br><span class="line">...</span><br><span class="line"><span class="meta">irb(main):013:0&gt;</span> (<span class="number">1</span>..<span class="number">10</span>).each do h end</span><br><span class="line">Hello, wo!</span><br><span class="line">Hello, wo!</span><br><span class="line">Hello, wo!</span><br><span class="line">Hello, wo!</span><br><span class="line">Hello, wo!</span><br><span class="line">Hello, wo!</span><br><span class="line">Hello, wo!</span><br><span class="line">Hello, wo!</span><br><span class="line">Hello, wo!</span><br><span class="line">Hello, wo!</span><br><span class="line">=&gt; <span class="number">1</span>..<span class="number">10</span></span><br></pre></td></tr></table></figure>
<p>循环也可以换行<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">irb(main):021:0&gt;</span> (<span class="number">1</span>..<span class="number">10</span>).each do <span class="params">|i|</span></span><br><span class="line">irb(main)<span class="symbol">:</span><span class="number">022</span><span class="symbol">:</span><span class="number">1</span>*   h()</span><br><span class="line"><span class="meta">irb(main):023:1&gt;</span> end</span><br></pre></td></tr></table></figure></p>
<h3 id="更优雅的-方法"><a href="#更优雅的-方法" class="headerlink" title="更优雅的 *方法"></a>更优雅的 <code>*</code>方法</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">irb(main):026:0&gt;</span> <span class="string">"Hello, wo!"</span> * <span class="number">10</span></span><br><span class="line">=&gt; <span class="string">"Hello, wo!Hello, wo!Hello, wo!Hello, wo!Hello, wo!Hello, wo!Hello, wo!Hello, wo!Hello, wo!Hello, wo!"</span></span><br><span class="line"><span class="meta">irb(main):028:0&gt;</span> puts <span class="string">"Hello, wo!\n"</span> * <span class="number">10</span></span><br><span class="line">Hello, wo!</span><br><span class="line">Hello, wo!</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h2 id="4-循环"><a href="#4-循环" class="headerlink" title="4. 循环"></a>4. 循环</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">irb(main):030:0&gt;</span> (<span class="number">1</span>..<span class="number">10</span>).each do <span class="params">|i|</span></span><br><span class="line">irb(main)<span class="symbol">:</span><span class="number">031</span><span class="symbol">:</span><span class="number">1</span>*   puts <span class="string">"This is sentence number <span class="subst">#&#123;i&#125;</span>."</span></span><br><span class="line"><span class="meta">irb(main):032:1&gt;</span> end</span><br><span class="line">This is sentence number <span class="number">1</span>.</span><br><span class="line">This is sentence number <span class="number">2</span>.</span><br><span class="line">This is sentence number <span class="number">3</span>.</span><br><span class="line">This is sentence number <span class="number">4</span>.</span><br><span class="line">This is sentence number <span class="number">5</span>.</span><br><span class="line">This is sentence number <span class="number">6</span>.</span><br><span class="line">This is sentence number <span class="number">7</span>.</span><br><span class="line">This is sentence number <span class="number">8</span>.</span><br><span class="line">This is sentence number <span class="number">9</span>.</span><br><span class="line">This is sentence number <span class="number">10</span>.</span><br><span class="line">=&gt; <span class="number">1</span>..<span class="number">10</span></span><br></pre></td></tr></table></figure>
<h2 id="5-amp-6-猜数字-rb"><a href="#5-amp-6-猜数字-rb" class="headerlink" title="5.&amp;6. 猜数字.rb"></a>5.&amp;6. 猜数字.rb</h2><figure class="highlight ruby"><figcaption><span>Guess-Number.rb </span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Guess num between [0..9]</span></span><br><span class="line">num = rand(<span class="number">10</span>)</span><br><span class="line">puts <span class="string">"Let's guess number !\nHave a guess!\n"</span> </span><br><span class="line">loop <span class="keyword">do</span></span><br><span class="line">    tmp = gets.to_i</span><br><span class="line">    puts <span class="string">"Too High"</span> <span class="keyword">if</span> num &lt; tmp</span><br><span class="line">    puts <span class="string">"Too Low"</span> <span class="keyword">if</span> num &gt; tmp</span><br><span class="line">    <span class="keyword">break</span> <span class="keyword">if</span> num == gets.to_i </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">puts <span class="string">"Yes! rand number is <span class="subst">#&#123;num&#125;</span>"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight ruby"><figcaption><span>result</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">I:</span>\Desktop\Programming\Ruby&gt;ruby <span class="string">"Guess Number.rb"</span></span><br><span class="line">Let<span class="string">'s guess number !</span></span><br><span class="line"><span class="string">Have a guess!</span></span><br><span class="line"><span class="string">5</span></span><br><span class="line"><span class="string">Too High</span></span><br><span class="line"><span class="string">4</span></span><br><span class="line"><span class="string">Yes! rand number is 4</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">I:\Desktop\Programming\Ruby&gt;ruby "Guess Number.rb"</span></span><br><span class="line"><span class="string">Let'</span>s guess number !</span><br><span class="line">Have a guess!</span><br><span class="line"><span class="number">5</span></span><br><span class="line">Too Low</span><br><span class="line"><span class="number">9</span></span><br><span class="line">Yes! rand number is <span class="number">9</span></span><br></pre></td></tr></table></figure>
<p>[2017-04-22]</p>
<hr>
<h1 id="———-Day-2-———"><a href="#———-Day-2-———" class="headerlink" title="——— Day 2 ———"></a>——— Day 2 ———</h1><h1 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h1><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><ul>
<li>Ruby 用命令行就可以定义函数</li>
<li>每个函数都会返回结果。如果你没有显式指定某个返回值，函数就将返回退出函数前最后处理的表达式的值。</li>
<li>像所有其他事物一样，函数也是个对象。</li>
</ul>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><ul>
<li>如果访问任何未定义的数组元素，Ruby会直接返回nil</li>
<li>数组元素不必具有相同类型</li>
</ul>
<h2 id="散列表"><a href="#散列表" class="headerlink" title="散列表"></a>散列表</h2><ul>
<li>键=&gt;值</li>
<li>符号（symbol）<br>  符号是前面带有冒号的标识符，类似于:symbol的形式<br>  尽管两个同值字符串在物理上不同，但相同的符号却是同一物理对象<br>  类似严格指针/ Alias</li>
</ul>
<h2 id="代码块和yield"><a href="#代码块和yield" class="headerlink" title="代码块和yield"></a>代码块和yield</h2><ul>
<li>代码块是没有名字的函数。它可以作为参数传递给函数或方法<br>  可以采用{/}或do/end两种界定代码块的形式</li>
<li>Ruby的一般惯例是：代码块只占一行时用大括号，代码块占多行时用do/end。</li>
<li>在Ruby中，参数名之前加一个“&amp;”，表示将代码块作为闭包传递给函数。</li>
</ul>
<h2 id="类"><a href="#类" class="headerlink" title="类"></a>类</h2><p><strong>Ruby的命名一些惯例和规则</strong>:</p>
<ul>
<li>实例变量（一个对象有一个值）前必须加上@</li>
<li>而类变量（一个类有一个值） 前必须加上@@</li>
<li>实例变量和方法名以小写字母开头， 并采用下划线命名法， 如underscore_style。</li>
<li>常量采用全大写形式，如ALL_CAPS。</li>
<li>用于逻辑测试的函数和方法一般要加上问号，如if test?。</li>
</ul>
<p><strong>attr 关键字可用来定义实例变量</strong>:</p>
<ul>
<li>attr定义实例变量和访问变量的同名方法，<br>  实际上，attr也可以定义设置方法，只需将true作为第二个参数传入即可，如attr_accessor :children, true。</li>
<li>而attr_accessor定义实例变量、访问方法和设置方法。</li>
</ul>
<h1 id="summary-1"><a href="#summary-1" class="headerlink" title="summary"></a>summary</h1><ul>
<li>集合<ul>
<li>数组</li>
<li>散列表</li>
</ul>
</li>
<li>Ruby关注的是程序员的效率，应用程序的效率是次要的。</li>
<li>枚举</li>
<li>单继承、面向对象</li>
</ul>
<h1 id="Todo-1"><a href="#Todo-1" class="headerlink" title="Todo"></a>Todo</h1><p><strong>Find</strong>:</p>
<ul>
<li><p>分别找到用代码块和不用代码块读取文件的方法，用代码块有什么好处？<br>  |- 不用代码块</p>
  <figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">file = File.new(<span class="string">"testfile"</span>, <span class="string">"r"</span>)</span><br><span class="line"><span class="comment"># ... do something</span></span><br><span class="line">file.close</span><br></pre></td></tr></table></figure>
<p>  |- 用代码块</p>
  <figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">File.open(<span class="string">"testfile"</span>, <span class="string">"r"</span>) <span class="keyword">do</span> <span class="params">|file|</span></span><br><span class="line">    <span class="comment"># ... do somrthing</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>  参看[Programming Ruby - P128]，书上说：</p>
<blockquote>
<p>用代码块，如果在处理文件中发生异常，open方法可以捕捉并处理这个异常。而不用代码块，可能无法关闭文件对象。</p>
</blockquote>
</li>
<li><p>如何把散列表转换成数组？数组能转换成散列表吗？<br>  |- 散列转数组：</p>
  <figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">"a"</span>=&gt;<span class="string">"1"</span>, <span class="string">"b"</span>=&gt;<span class="string">"2"</span>, <span class="string">"c"</span>=&gt;<span class="string">"3"</span>&#125;.to_a</span><br><span class="line"><span class="comment">#=&gt; [["a", "1"], ["b", "2"], ["c", "3"]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认生成二维数组，可以用 `flatten` 方法转换为一维数组</span></span><br><span class="line">&#123;<span class="string">"a"</span>=&gt;<span class="string">"1"</span>, <span class="string">"b"</span>=&gt;<span class="string">"2"</span>, <span class="string">"c"</span>=&gt;<span class="string">"3"</span>&#125;.to_a.flatten</span><br><span class="line"><span class="comment">#=&gt; ["a", "1", "b", "2", "c", "3"]</span></span><br></pre></td></tr></table></figure>
<p>  搜索后发现还可以用zip <a href="https://ruby-china.org/topics/24622" target="_blank" rel="noopener">Ruby 数组转 hash · Ruby China</a></p>
  <figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">irb(main):035:0&gt;</span> &#123;<span class="string">"a"</span>=&gt;<span class="string">"1"</span>, <span class="string">"b"</span>=&gt;<span class="string">"2"</span>, <span class="string">"c"</span>=&gt;<span class="string">"3"</span>&#125;.zip</span><br><span class="line">=&gt; [[[<span class="string">"a"</span>, <span class="string">"1"</span>]], [[<span class="string">"b"</span>, <span class="string">"2"</span>]], [[<span class="string">"c"</span>, <span class="string">"3"</span>]]]</span><br><span class="line"><span class="meta">irb(main):036:0&gt;</span> &#123;<span class="string">"a"</span>=&gt;<span class="string">"1"</span>, <span class="string">"b"</span>=&gt;<span class="string">"2"</span>, <span class="string">"c"</span>=&gt;<span class="string">"3"</span>&#125;.zip.flatten</span><br><span class="line">=&gt; [<span class="string">"a"</span>, <span class="string">"1"</span>, <span class="string">"b"</span>, <span class="string">"2"</span>, <span class="string">"c"</span>, <span class="string">"3"</span>]</span><br></pre></td></tr></table></figure>
<p>  |- 数组转散列：</p>
  <figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">arr = <span class="string">%w[a 1 b 2 c 3]</span></span><br><span class="line">hash_table = Hash[*arr]</span><br><span class="line"></span><br><span class="line"><span class="comment"># at one line</span></span><br><span class="line"></span><br><span class="line">hash_table = Hash[*<span class="string">%w[a 1 b 2 c 3]</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p>你能循环遍历散列表吗？<br>  |- <code>{a: 1, b: 2, c: 3}.each {|k, v| puts &quot;#{k}=&gt;#{v}&quot;}</code></p>
</li>
<li>Ruby的数组能当作栈来用，它还能用作哪些常用的数据结构？<br>  |- 栈/<code>Stack</code>、集合/<code>Set</code>、队列/<code>Queue</code>、双向队列/<code>Dequeue</code>、先进先出队列/<code>fifo</code></li>
</ul>
<p><strong>Do</strong></p>
<ol>
<li>有一个数组，包含16个数字。仅用each方法打印数组中的内容，一次打印4个数字。然后，用可枚举模块的each_slice方法重做一遍。</li>
<li><p>我们前面实现了一个有趣的树类Tree，但它不具有简洁的用户接口，来设置一棵新树，为它写一个初始化方法，接受散列表和数组嵌套的结构。<br> |- 写好之后，你可以这样设置新树：</p>
 <figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">'grandpa'</span> =&gt; &#123; </span><br><span class="line">    <span class="string">'dad'</span> =&gt; &#123;</span><br><span class="line">      <span class="string">'child 1'</span> =&gt; &#123;&#125;, </span><br><span class="line">      <span class="string">'child 2'</span> =&gt; &#123;&#125; </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">'uncle'</span>=&gt; &#123;</span><br><span class="line">      <span class="string">'child 3'</span> =&gt; &#123;&#125;, </span><br><span class="line">      <span class="string">'child 4'</span> =&gt; &#123;&#125; </span><br><span class="line">    &#125; </span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>写一个简单的grep程序，把文件中出现某词组的行全都打印出来。这需要使用简单的正则表达式匹配，并从文件中读取各行。<br> |- （这在Ruby中超乎想象地简单。）如果你愿意的话，还可以加上行号。   </p>
</li>
</ol>
<p>[2017-04-23]</p>
<h2 id="1-each与枚举"><a href="#1-each与枚举" class="headerlink" title="1. each与枚举"></a>1. each与枚举</h2><p>这破题太坑，查了下手册，发现 <code>each</code> 并不能指定步长， <code>setp()</code> 可以。</p>
<p>然后就有了以下解法：(&lt;- 其实是投机取巧，<code>array</code> 并没有 <code>step</code> 方法)<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>..<span class="number">16</span>).step(<span class="number">4</span>).each&#123;<span class="params">|i|</span> print i, <span class="string">" "</span>, i.<span class="keyword">next</span>, <span class="string">" "</span>, i.<span class="keyword">next</span>.<span class="keyword">next</span>, <span class="string">" "</span>, i.<span class="keyword">next</span>.<span class="keyword">next</span>.<span class="keyword">next</span>, <span class="string">"\n"</span>&#125;</span><br></pre></td></tr></table></figure></p>
<p>之后又上网查了下，发现果然是大坑，一般的实现都用了判断语句：</p>
<p>ref：</p>
<ul>
<li><a href="https://ruby-china.org/topics/24514" target="_blank" rel="noopener">如何仅用 each 实现 each_slice 的功能？ · Ruby China</a></li>
<li><a href="https://www.oschina.net/question/1156611_142414" target="_blank" rel="noopener">Ruby数组的each方法使用 - 开源中国社区</a></li>
</ul>
<p><strong>较优雅的解法</strong><br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>..<span class="number">16</span>).to_a.each &#123;<span class="params">|i|</span> print i, <span class="string">" "</span>; print <span class="string">"\n"</span> <span class="keyword">unless</span> i%<span class="number">4</span> !=<span class="number">0</span>&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="2-树与方法"><a href="#2-树与方法" class="headerlink" title="2. 树与方法"></a>2. 树与方法</h2><p>想到大概要用递归，但是还是图样，参考</p>
<p><a href="http://www.cnblogs.com/iceCream/archive/2012/12/02/2855493.html" target="_blank" rel="noopener">七周七语言：Ruby Day 2 - 冰激淋 - 博客园</a></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tree</span></span></span><br><span class="line">  <span class="keyword">attr_accessor</span> <span class="symbol">:children</span>, <span class="symbol">:node_name</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">initialize</span><span class="params">(hash)</span></span></span><br><span class="line">    hash.each <span class="keyword">do</span> <span class="params">|name, children|</span></span><br><span class="line">      @node_name = name</span><br><span class="line">      @children = children.map &#123;<span class="params">|key, value|</span> Tree.new(key =&gt; value)&#125;</span><br><span class="line">    <span class="keyword">end</span>    </span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">visit_all</span><span class="params">(&amp;block)</span></span></span><br><span class="line">    visit &amp;block</span><br><span class="line">    children.each &#123;<span class="params">|c|</span> c.visit_all &amp;block&#125;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">visit</span><span class="params">(&amp;block)</span></span></span><br><span class="line">    block.call <span class="keyword">self</span></span><br><span class="line">  <span class="keyword">end</span>    </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">ruby_tree = Tree.new(&#123;<span class="string">'grandpa'</span> =&gt; &#123;<span class="string">'dad'</span> =&gt; &#123;<span class="string">'child 1'</span> =&gt; &#123;&#125;, <span class="string">'child 2'</span> =&gt; &#123;&#125;&#125;, <span class="string">'uncle'</span> =&gt; &#123;<span class="string">'child 3'</span> =&gt; &#123;&#125;, <span class="string">'child 4'</span> =&gt; &#123;&#125; &#125;&#125;&#125;)</span><br><span class="line"></span><br><span class="line">puts <span class="string">"visiting a node"</span></span><br><span class="line">ruby_tree.visit &#123;<span class="params">|node|</span> puts node.node_name&#125;</span><br><span class="line">puts</span><br><span class="line"></span><br><span class="line">puts <span class="string">"Visiting entire tree"</span></span><br><span class="line">ruby_tree.visit_all &#123;<span class="params">|node|</span> puts node.node_name&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight ruby"><figcaption><span>输出</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">PS <span class="symbol">I:</span>\Desktop\Programming\Ruby\<span class="number">7</span>d7lang&gt; .\tree.rb</span><br><span class="line">visiting a node</span><br><span class="line">Ruby</span><br><span class="line"></span><br><span class="line">Visiting entire tree</span><br><span class="line">Ruby</span><br><span class="line">Reia</span><br><span class="line">MacRuby</span><br></pre></td></tr></table></figure>
<h2 id="3-grep"><a href="#3-grep" class="headerlink" title="3. grep"></a>3. grep</h2><p>用了文件块，实现了带行号输出，测试文件 <a href="https://www.ruby-lang.org/en/about/license.txt" target="_blank" rel="noopener">Ruby’ license</a></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># grep-word.rb</span></span><br><span class="line"><span class="comment"># codeblock + gets</span></span><br><span class="line">word = <span class="string">"give"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">grep</span><span class="params">(line, keyword=<span class="string">"Ruby"</span>)</span></span></span><br><span class="line">    line.gsub(keyword) &#123;<span class="params">|match|</span> <span class="string">%Q(!!<span class="subst">#&#123;match&#125;</span>!!)</span>&#125;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">File.open(<span class="string">"ruby-license.txt"</span>, <span class="string">"r"</span>) <span class="keyword">do</span> <span class="params">|file|</span></span><br><span class="line">  i = <span class="number">0</span></span><br><span class="line">  <span class="keyword">while</span> line = file.gets</span><br><span class="line">    i += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> line != grep(line, word)</span><br><span class="line">      print <span class="string">"Line "</span>, i, <span class="string">": "</span>, grep(line, word) </span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>也可以用 <code>each_line</code><br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># grep-word-ver2.rb</span></span><br><span class="line"><span class="comment"># code block +　`each_line` Method</span></span><br><span class="line">key = <span class="string">"give"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">grep</span><span class="params">(line, keyword=<span class="string">"Ruby"</span>)</span></span></span><br><span class="line">  line.gsub(keyword,<span class="string">%Q(!!<span class="subst">#&#123;keyword&#125;</span>!!)</span>) <span class="keyword">unless</span> line !~ <span class="regexp">/<span class="subst">#&#123;keyword&#125;</span>/</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">File.open(<span class="string">"ruby-license.txt"</span>, <span class="string">"r"</span>) <span class="keyword">do</span> <span class="params">|file|</span></span><br><span class="line">  i = <span class="number">0</span></span><br><span class="line">  file.each_line <span class="keyword">do</span> <span class="params">|line|</span> </span><br><span class="line">    i += <span class="number">1</span></span><br><span class="line">    print <span class="string">"Line "</span>, i, <span class="string">": "</span>, grep(line, key) <span class="keyword">unless</span> !grep(line, key)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></p>
<p><strong>IO.foreach</strong></p>
<p>迭代器 + <code>block</code> = <code>IO.foreach</code></p>
<p>该方法以数据源的名字为参数，以只读模式打开它，并以文件中的每一行为参数调用迭代器。</p>
<p>用正则让匹配更精确，转义序列配上背景颜色。<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># grep-word-ver3.rb</span></span><br><span class="line"><span class="comment"># code block +　IO.foreach + Regexp + colorize</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">grep</span><span class="params">(filename=<span class="string">"testfile"</span>, re=<span class="regexp">/Ruby/</span>)</span></span></span><br><span class="line">  i = <span class="number">0</span></span><br><span class="line">  IO.foreach(filename) <span class="keyword">do</span> <span class="params">|line|</span></span><br><span class="line">    i += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> line =~ re</span><br><span class="line">      puts <span class="string">%Q(Line <span class="subst">#&#123;i&#125;</span>: <span class="subst">#&#123;$`&#125;</span>\033[42m<span class="subst">#&#123;$&amp;&#125;</span>\033[0m<span class="subst">#&#123;$'&#125;</span>)</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span>            </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">grep(<span class="string">"ruby-license.txt"</span>, <span class="regexp">/[ ]&#123;1&#125;with[ ]&#123;1&#125;/</span>)</span><br></pre></td></tr></table></figure></p>
<img src="/可爱的小姐姐-Ruby/color.png" title="彩色输出效果">
<p>彩色转义序列参考 <a href="http://starzhou.com/blogs/ruby_colorize_console" target="_blank" rel="noopener">ruby输出多背景、颜色、效果的字符串</a></p>
<p>[2017-04-29]</p>
<hr>
<h1 id="———-Day-3-———"><a href="#———-Day-3-———" class="headerlink" title="——— Day 3 ———"></a>——— Day 3 ———</h1><h1 id="Note-1"><a href="#Note-1" class="headerlink" title="Note"></a>Note</h1><h2 id="元编程"><a href="#元编程" class="headerlink" title="元编程"></a>元编程</h2><p><strong>Ruby与元编程（metaprogramming）</strong></p>
<p>元编程，说白了就是“写能写程序的程序”</p>
<p><strong>几种可用在元编程当中的技术</strong>:</p>
<ul>
<li>开放类<br>  它可以随时改变任何类的定义，常用于给类添加行为</li>
<li>method_missing<br>  这样做也要付出代价：我们写的类调试起来会比过去困难得多，因为Ruby再也不会告诉你找不到某个方法！</li>
<li>模块</li>
</ul>
<h1 id="summary-2"><a href="#summary-2" class="headerlink" title="summary"></a>summary</h1><ul>
<li>用Ruby定义自己的语法</li>
<li>动态地改变类</li>
</ul>
<h1 id="Todo-2"><a href="#Todo-2" class="headerlink" title="Todo"></a>Todo</h1><p><strong>Do</strong></p>
<ol>
<li><p>修改前面的CSV应用程序，使它可以用each方法返回CsvRow对象。然后，在CsvRow对象上，对某个给定标题，用method_missing方法返回标题所在列的值。</p>
<ul>
<li><p>| 比如，对于包含以下内容的文件：</p>
  <figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">one, two</span><br><span class="line">lions, tigers</span><br></pre></td></tr></table></figure>
</li>
<li><p>| API可以向下面这样操作</p>
  <figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">csv = RubyCsv.new</span><br><span class="line">csv.each &#123;<span class="params">|row|</span> puts row.one&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>| 这会打印出”lions”</p>
</li>
</ul>
</li>
</ol>
<p>[2017-04-23]</p>
<h2 id="CSV程序"><a href="#CSV程序" class="headerlink" title="CSV程序"></a>CSV程序</h2><p>testfile</p>
<figure class="highlight plain"><figcaption><span>rubycsv.txt</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">one, two</span><br><span class="line">lions, tigers</span><br></pre></td></tr></table></figure>
<p>想了半天没思路，去官方论坛找了找，也没有人给答案。</p>
<p>找了两个ref：</p>
<ul>
<li><a href="https://github.com/kikito/7-languages-in-7-weeks/blob/master/1-ruby/day-3/acts_as_csv.rb" target="_blank" rel="noopener">7-languages-in-7-weeks/1-ruby/day-3/acts_as_csv.rb</a></li>
<li><a href="http://www.ybrikman.com/writing/2012/01/31/seven-languages-in-seven-weeks-ruby-day_31/" target="_blank" rel="noopener">Ruby, Day 3: Problems CSV application</a><br>  这个怀疑代码是抄的，<code>respond_to?</code>方法的参数与函数本体对不上。</li>
</ul>
<p>大致看了一下，要新加入一个 <code>each</code> 方法和一个 <code>CscRow</code> 类。</p>
<p>最后参照第一个ref, 改写出了答案<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">module</span> <span class="title">ActsAsCsv</span></span></span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">self</span>.<span class="title">included</span><span class="params">(base)</span></span></span><br><span class="line">    base.extend ClassMethods</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  </span><br><span class="line">  <span class="class"><span class="keyword">module</span> <span class="title">ClassMethods</span></span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">acts_as_csv</span></span></span><br><span class="line">      <span class="keyword">include</span> InstanceMethods</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">module</span> <span class="title">InstanceMethods</span></span></span><br><span class="line">    <span class="keyword">attr_accessor</span> <span class="symbol">:headers</span>, <span class="symbol">:csv_contents</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">initialize</span></span></span><br><span class="line">      read</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">read</span></span></span><br><span class="line">      @csv_contents = []</span><br><span class="line">      filename = <span class="keyword">self</span>.<span class="keyword">class</span>.to_s.downcase + <span class="string">'.txt'</span></span><br><span class="line">      file = File.new(filename)</span><br><span class="line">      @headers = file.gets.chomp.split(<span class="string">', '</span>)</span><br><span class="line">      </span><br><span class="line">      file.each <span class="keyword">do</span> <span class="params">|row|</span></span><br><span class="line">        @csv_contents &lt;&lt; row.chomp.split(<span class="string">', '</span>)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">each</span><span class="params">(&amp;block)</span></span></span><br><span class="line">      @csv_contents.each &#123;<span class="params">|contents|</span> block.call(CsvRow.new(headers, contents))&#125;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">CsvRow</span></span></span><br><span class="line">      </span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">initialize</span><span class="params">(headers, row)</span></span></span><br><span class="line">        @headers = headers</span><br><span class="line">        @row = row</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      </span><br><span class="line"><span class="comment">=begin</span></span><br><span class="line"><span class="comment">      # 暂不清楚作用， 注释掉不影响程序</span></span><br><span class="line"><span class="comment">      def respond_to?(name)</span></span><br><span class="line"><span class="comment">        <span class="doctag">@headers</span>.index(name.to_s)</span></span><br><span class="line"><span class="comment">      end</span></span><br><span class="line"><span class="comment">=end</span></span><br><span class="line">      </span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">method_missing</span> <span class="title">name</span>, <span class="title">*</span><span class="title">args</span></span></span><br><span class="line">        index = @headers.index(name.to_s)   </span><br><span class="line">        @row[index] <span class="keyword">if</span> index</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      </span><br><span class="line">    <span class="keyword">end</span> <span class="comment"># class CvsRow END</span></span><br><span class="line">    </span><br><span class="line">  <span class="keyword">end</span> <span class="comment"># module InstanceMethods END</span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">end</span> <span class="comment"># module ActsAsCsv END</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RubyCsv</span></span></span><br><span class="line">  <span class="keyword">include</span> ActsAsCsv</span><br><span class="line">  acts_as_csv</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">m = RubyCsv.new</span><br><span class="line">puts m.headers.inspect</span><br><span class="line">puts m.csv_contents.inspect</span><br><span class="line">m.each &#123;<span class="params">|row|</span> puts row.one, row.two&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[&quot;one&quot;, &quot;two&quot;]</span><br><span class="line">[[&quot;lions&quot;, &quot;tigers&quot;]]</span><br><span class="line">lions</span><br><span class="line">tigers</span><br></pre></td></tr></table></figure>
<p>[2017-04-29]</p>
<hr>
<h1 id="–-More-about-Ruby-–"><a href="#–-More-about-Ruby-–" class="headerlink" title="– More about Ruby –"></a>– More about Ruby –</h1><h1 id="Ruby-的核心优势"><a href="#Ruby-的核心优势" class="headerlink" title="Ruby 的核心优势"></a>Ruby 的核心优势</h1><blockquote>
<p>Ruby的纯面向对象可以让你用一致的方式来处理对象。  </p>
</blockquote>
<p>鸭子类型根据对象可提供的方法，而不是对象的继承层次，实现了更切合实际的多态设计。  </p>
<blockquote>
</blockquote>
<p>Ruby的模块和开放类，使程序员能把行为紧密结合到语法上，这大大超越了类中定义的传统方法和实例变量。</p>
<ol>
<li>脚本<br> glue code<br> 数以千计的gem或预打包插件</li>
<li>Web开发<br> Rails  </li>
</ol>
<h1 id="不足之处"><a href="#不足之处" class="headerlink" title="不足之处"></a>不足之处</h1><ol>
<li>性能</li>
<li>并发和面向对象编程<br> 最好的情况下，Ruby会产生大量的资源竞争；<br> 最坏的情况下，面向对象语言几乎无法在并发环境下调试程序，也无法可靠地测试程序。</li>
<li>类型安全</li>
</ol>
<div style="display: none;"><br>


{% blockquote [author[, source]] [link] [source_link_title] %}
content
{% endblockquote %}


{% codeblock [title] [lang:language] [url] [link text] %}
code snippet
{% endcodeblock %}

undefined

{% img [class names] /path/to/image [width] [height] [title text [alt text]] %}

{% asset_img slug [title] %}


<br></div>

      
    </div>

    
      
      



      
      
    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/Ruby/">Ruby</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/texlive2016-更新问题/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">texlive2016 更新问题</span>
        <span class="prev-text nav-mobile">上一篇</span>
      </a>
    
    
      <a class="next" href="/编程七日-周-谈/">
        <span class="next-text nav-default">编程七日(周)谈</span>
        <span class="prev-text nav-mobile">下一篇</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
  </div>


        </div>  
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
    
      
    
      
    
      
        
          <a href="https://github.com/inkydragon" class="iconfont icon-github" title="github"></a>
        
      
    
      
    
      
    
    
    
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>


<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://hexo.io/">Hexo</a> 强力驱动
  </span>
  
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2015 - 
    
    2018

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">woclass</span>
  </span>
</div>
      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  

  
  




    
  





  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.4.x"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.4.x"></script>

    
  <script type="text/html" id="search-result">
    <article class="post">
      <header class="post-header">
        <h1 class="post-title">
          <a href="$url$" class="post-link">
            $title$
          </a>
        </h1>
      </header>
      <div class="post-content">
        $content$
        <div class="read-more">
          <a href="$url$" class="read-more-link">
            阅读更多
          </a>
        </div>
      </div>
    </article>
  </script>
  <script type="text/html" id="no-search-result">
    <div class="no-result">
      <h2>No result found!</h2>
    </div>
  </script>
  <script type="text/javascript" src="/js/src/search.js?v=2.4.x"></script>

  </body>
</html>
